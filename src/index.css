/* ================= PRINT STYLES ================= */
@media print {
  /* Force print styles at root level */
  :root {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
    forced-color-adjust: exact !important;
  }
  
  /* Force light mode for ALL elements - strengthened */
  html,
  body,
  body.dark,
  body.printing,
  #root,
  #__next,
  main,
  .app-container,
  [data-theme="dark"],
  [data-mode="dark"],
  :where(*) {
    background-color: white !important;
    color: black !important;
    filter: none !important;
  }
  
  /* Override dark mode variables globally */
  html,
  :root {
    --background: #ffffff !important;
    --foreground: #000000 !important;
    --card: #ffffff !important;
    --card-foreground: #000000 !important;
    --popover: #ffffff !important;
    --popover-foreground: #000000 !important;
    --primary: #000000 !important;
    --primary-foreground: #ffffff !important;
    --secondary: #f5f5f5 !important;
    --secondary-foreground: #171717 !important;
    --muted: #f5f5f5 !important;
    --muted-foreground: #737373 !important;
    --accent: #f5f5f5 !important;
    --accent-foreground: #171717 !important;
    --destructive: #ef4444 !important;
    --destructive-foreground: #ffffff !important;
    --border: #e5e5e5 !important;
    --input: #e5e5e5 !important;
    --ring: #171717 !important;
  }
  
  /* Ensure all backgrounds print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
    forced-color-adjust: exact !important;
  }
  
  /* Mobile-specific overrides */
  @media screen and (max-width: 767px) {
    body,
    body.dark,
    html,
    #root,
    #__next,
    main,
    .app-container,
    [data-theme="dark"],
    [data-mode="dark"] {
      background-color: white !important;
      color: black !important;
      -webkit-filter: none !important;
      filter: none !important;
    }
  }
  
  /* Risk bar specific styles */
  .risk-bar-container {
    background-color: #e5e7eb !important; /* bg-gray-200 */
  }
  
  .risk-bar-fill {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
    fill-opacity: 1 !important;
  }
  
  /* Status indicators */
  .status-indicator {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  
  /* Chart styling */
  .recharts-wrapper,
  .recharts-surface {
    overflow: visible !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  
  .recharts-bar-rectangle {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  
  /* Hide unwanted elements */
  footer,
  .no-print,
  .print\:hidden,
  nav,
  button,
  .button,
  .btn,
  [role="button"],
  input[type="button"],
  input[type="submit"],
  .navbar,
  .nav-menu,
  .menu,
  .mobile-nav,
  .header-nav,
  .site-nav {
    display: none !important;
    visibility: hidden !important;
  }
  
  /* Table styling */
  table {
    border-collapse: collapse !important;
    width: 100% !important;
    background-color: white !important;
    color: black !important;
  }
  
  th, td {
    border: 1px solid #d1d5db !important; /* gray-300 */
    padding: 0.5rem !important;
    background-color: white !important;
    color: black !important;
  }
  
  /* Card styling */
  .card {
    break-inside: avoid;
    page-break-inside: avoid;
    background-color: white !important;
    color: black !important;
    border: 1px solid #e5e7eb !important;
  }
  
  .print-chart-container {
    height: 180px !important;
    min-height: 180px !important;
    overflow: visible !important;
  }
  
  .print-chart-wrapper {
    page-break-inside: avoid;
    break-inside: avoid;
    overflow: visible !important;
  }
  
  .recharts-cartesian-axis-tick {
    font-size: 10px !important;
    fill: #000000 !important; /* Ensure tick text is black */
  }
  
  .print-new-page {
    page-break-before: always !important;
    break-before: page !important;
    margin-top: 0 !important;
  }
  
  /* Table containers */
  .print-table-container {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    background-color: white !important;
  }
  
  /* Table row protection */
  .print-table-container tr {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    background-color: white !important;
    color: black !important;
  }
  
  /* Force full width for print */
  .print\:w-full {
    width: 100% !important;
  }
  
  /* Text contrast for print */
  .text-gray-600,
  .text-gray-700,
  .text-gray-400,
  .text-muted-foreground,
  .text-gray-500,
  .text-gray-800,
  .text-gray-900,
  [class*="text-"] {
    color: #4b5563 !important; /* gray-600 */
  }
  
  /* SVG elements need color forcing too */
  svg, path, rect, circle, line, polyline, polygon {
    color: currentColor !important;
    stroke: currentColor !important;
    fill: currentColor !important;
  }
  
  /* Force background images to print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  
  /* Added specific fix for iOS Safari */
  @media not all and (min-resolution:.001dpcm) { 
    @supports (-webkit-appearance:none) {
      html, body {
        -webkit-filter: brightness(1) !important;
        filter: brightness(1) !important;
        background: white !important;
        color: black !important;
      }
    }
  }
  
  /* Special fix for Android Chrome */
  @media screen and (-webkit-min-device-pixel-ratio:0) {
    body {
      -webkit-print-color-adjust: exact !important;
      background-color: white !important;
      color: black !important;
    }
  }
}
